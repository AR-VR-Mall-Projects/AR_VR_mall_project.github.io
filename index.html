<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">

  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport" />
  <!-- PWA manifest -->
  <link href="manifest.json" rel="manifest">
  <!-- Add to home screen for Safari on iOS -->
  <meta content="yes" name="apple-mobile-web-app-capable">
  <meta content="black" name="apple-mobile-web-app-status-bar-style">
  <meta content="Personal Assistant " name="apple-mobile-web-app-title">
  <link href="img/icons/vr-glasses_512.png" rel="apple-touch-icon">

  <link rel="stylesheet" href="main.css">
  <title>VR Inside</title>

  <meta name="description" content="VR Shopping Experience">
  <!-- VR Vedio chat  -->
  <script src="js/libs/socket.io.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r126/three.min.js" integrity="sha512-n8IpKWzDnBOcBhRlHirMZOUvEq2bLRMuJGjuVqbzUJwtTsgwOgK5aS0c1JA647XWYfqvXve8k3PtZdzpipFjgg==" crossorigin="anonymous"></script>
	<script src="js/libs/three.min.js"></script>
  <script src="https://unpkg.com/three@0.126.0/examples/js/loaders/GLTFLoader.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.117.1/examples/jsm/loaders/FBXLoader.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>
	<script src="js/libs/firstPersonControls.js"></script>
	<script src="js/libs/simplepeer.min.js"></script>
  <script src="js/OrbitControls.js"></script>

	<script src="js/environment.js"></script>
	<script src="js/scene.js"></script>
	<script src="js/index.js"></script>

	<style>
		body {
			overflow: hidden;
		}

		#info {
			padding: 1em;
			border: 1em;
			color: rgb(223, 223, 223);
		}
	</style>
<!-- end Of vedio chat -->

  <!-- lib files-->
  

  <script src="js/libs/three.min.js"></script>
  <script src="js/libs/VRControls.min.js"></script>
  <script src="js/libs/aframe.min.js"></script>
  <script src="js/libs/aframe-extras.js"></script>
  <script src="js/libs/aframe-physics.min.js"></script>

  <script>


    (function () {

      var myVr = {};


      // for playing walking sound
      AFRAME.registerComponent('position-listener', {

        tick() {
          debugger;
          const newValue = this.el.getAttribute('position');
          const stringCoords = AFRAME.utils.coordinates.stringify(newValue);

          if (this.lastValue !== stringCoords) {
            this.el.emit('positionChanged', newValue);
            this.lastValue = stringCoords;
            var entity = document.querySelector('[sound]');
            document.getElementById("river").play();
          }
          else {
            document.getElementById("river").pause();

          }
        },
      });

      // for getting component ready 
      AFRAME.registerComponent('log', {
        schema: { type: 'string' },
        init: function () {
          var stringToLog = this.data;
          console.log(stringToLog);
          // myVr.audioElement = document.getElementById("song");
        }
      });

      function playsong(songUrl, panelID) {
        myVr.audioElement.src = songUrl;
        myVr.audioElement.play();
      }

      function stopSong(panelID) {
        myVr.audioElement.pause();
      }

      function talkBack(str) {
        var msg = new SpeechSynthesisUtterance();
        msg.text = str;
        msg.volume = 1;
        msg.rate = 1;
        msg.pitch = 1;
        var voiceSelect = "Google UK English Female"; //  Google हिन्दी
        msg.voice = speechSynthesis.getVoices().filter(function (voice) { return voice.name == voiceSelect; })[0];
        window.speechSynthesis.speak(msg);
      }

      // speech api for buying notification
      function buyAlbum(panelID) {
        // speak command
        talkBack("Selected Item has been added to the cart successfully ! Thank You");
        if (panelID) {
          window.setTimeout(function () {
            document.querySelector(panelID).setAttribute("visible", false);
          }, 500)
        }
      }

      myVr.playsong = playsong;
      myVr.stopSong = stopSong;
      myVr.buyAlbum = buyAlbum;
      window.myVr = myVr;

    })();
  </script>
</head>

<body>

    <div id="canvas-container"></div>
  
  

  <img id="loader" src="img/loader.gif" class="vr-loader" alt="loading-icon" />

  <a-scene log="Hello, Scene Loaded!" material="src: #night_sky;" 
    inspector="url: https://aframe.io/releases/0.3.0/aframe-inspector.min.js">

    <!-- lights-->

    <a-entity light="type:ambient;color:white;intensity:1" position="0 0 0"></a-entity>

    <!-- <a-entity light="type:spot;intensity:1;distance:50;decay:1;color:#ff0000;angle:90;castShadow:true"
      position="-1.44 4.16 -10.21"></a-entity>

    <a-entity light="type:point;intensity:2.25;distance:8;decay:0.5;color:#edfff1;angle:20;castShadow:true"
      position="7.9 7.17 -3.86"></a-entity>


    <a-entity id="fur-light"
      light="type:spot;intensity:1.5;distance:10;decay:0.5;color:#ffffff;angle:180;castShadow:true" position="9 7 20">
    </a-entity>

    <a-entity light="type:spot;intensity:1.5;distance:8;decay:0.5;color:#e6e6e6;angle:180;castShadow:true"
      position="-3.62 4.29 18.91"></a-entity> -->

    <!-- pathway lights-->
    <a-entity light="type:spot;intensity:1;distance:10;decay:0.5;color:#ffffff;angle:180;castShadow:true"
      position="-20 6 -21"></a-entity>

    <!-- <a-entity light="type:point;intensity:1;distance:10;decay:0.5;color:#ffffff;angle:180;castShadow:true"
      position="-20 6 -25"></a-entity> -->

    <!-- sports light-->
    <!-- <a-entity id="sports-light"
      light="type:spot;intensity:2;distance:8;decay:0.5;color:#cccccc;angle:20;castShadow:true"
      position="-10.38 3.96 -4.76" id="sports-light"></a-entity>

    <a-entity light="type:point;intensity:1.5;distance:12;decay:0.5;color:#0b57df;angle:180;castShadow:true"
      position="-13 2.81 -2.85"></a-entity> -->

    <!--music light-->
    <!-- <a-entity light="type:point;intensity:2;distance:8;decay:0.5;color:#fc7dff;angle:90;castShadow:true"
      position="-11.09 3.52 7.58"></a-entity> -->

    <!--elec light-->
    <!-- <a-entity id="electronics-light" rotation="-20 30 20"
      light="type:spot;intensity:2;distance:5;decay:0.25;color:#f5feb6;angle:50;castShadow:true"
      position="5.79 3.5 6.26"></a-entity>

    <a-entity light="type:point;intensity:2;distance:5;decay:0.25;color:#ffffff;angle:0;castShadow:true"
      position="4.89 4.74 10.02" id="el2"></a-entity>
    <a-entity light="type:point;intensity:2;distance:5;decay:0.25;color:#ffffff;angle:0;castShadow:true"
      position="5.28 4.71 4.92" id="el2-2"></a-entity> -->

    <!-- Splash Screen -->
    <div class="splash">
      <div class="splash__card">
        <h1>The First Complete <br />VR Shopping Experience </h1>
        <p>Powered By</p>
        <h2>VR Inside</h2>
        <br />
        <img class="splash__img" src="img/welcome-logo.png" alt="whoa" />
        <button class="splash__button" id="start">Enter</button>
      </div>
    </div>

    <!-- Load Assets -->
    <a-assets>
      <!-- global -->
      <!-- <img id="floor" src="img/floor.jpg"> -->
      <img id="floor" src="img/wall_images/wall-texture-3.jpg" alt="img">

      <!-- <sky -->
        <img id="night_sky" src="img/stars-1837306.jpg" alt="img">
      <img id="wall" src="img/wall_images/wall-texture-10.jpg">
      <!-- <img id="wall" src="img/wall_images/wall-texture-8.jpg"> -->
      <!-- <img id="wall" src="img/wall_images/wall-texture-9.jpg"> -->
      
      <!-- wallpapers -->
      <img id="try_wall" src="img/wall_images/nature.jpg" alt="img">
      <img id="grocery-img-1" src="img/wall_images/grocery/nrd-D6Tu_L3chLE-unsplash.jpg" alt="img">
      <img id="grocery-img-2" src="img/wall_images/grocery/Flipkart-Grocery-Offers-Sale.jpg" alt="img">
      <img id="grocery-img-3" src="img\wall_images\grocery\franki-chamaki-wkvKZR4e2OI-unsplash.jpg" alt="img">
      <img id="grocery-img-4" src="img\wall_images\grocery\alexandra-nosova-lpv--JSLa58-unsplash.jpg" alt="img">
      <img id="grocery-img-5" src="img\wall_images\grocery\sale.jpg" alt="img">


      <img id="room-sign-1" src="img/other/room-sign-1.png">
      <img id="room-sign-2" src="img/other/room-sign-2.png">
      <img id="room-sign-4" src="img/room4/room-sign-4.png">
      <img id="theatre-sign" src="img/other/theatre-logo.jpg">
      <img id="movie-poster" src="img/other/movie-poster.jpg">

      <!-- team -->
      <img id="team-poster" src="img/team/poster.png">
      <img id="team-arcadio" src="img/team/arcadio.png">
      <img id="team-dan" src="img/team/dan.png">
      <img id="team-dustin" src="img/team/dustin.png">
      <img id="team-judy" src="img/team/judy.png">
      <img id="team-maceij" src="img/team/maceij.png">
      <img id="team-porfirio" src="img/team/porfirio.png">

      <!--  Room 1-->
      <img id="room1-example" src="img/room1/example.png">
      <img id="room1-s" src="img/room1/room1-s.png">
      <img id="room1-sofa" src="img/room1/sofa-r1.jpg">
      <img id="room1-dine" src="img/room1/dining_sets.jpg">
      <img id="room1-drawer" src="img/room1/drawers.jpg">

      <!-- Example Room 2-->
      <img id="room2-final1" src="img/room2/final-1.png">
      <img id="room2-final2" src="img/room2/final-2.png">
      <img id="gullyboy" src="img/room2/gullyboy1.png">
      <img id="room2-final4" src="img/room2/final-4.png">
      <img id="room2-mock1" src="img/room2/mock-1.png">
      <img id="room2-mock2" src="img/room2/mock-2.png">
      <img id="room2-mock3" src="img/room2/mock-3.png">
      <img id="room2-mock4" src="img/room2/mock-4.png">
      <img id="room2-wire1" src="img/room2/wire-1.png">
      <img id="room2-wire2" src="img/room2/wire-2.png">
      <img id="room2-wire3" src="/img/room2/wire-3.png">
      <img id="room2-wire4" src="img/room2/wire-4.png">
      <img id="room2-final-sign" src="img/room2/final-sign.png">
      <img id="room2-mock-sign" src="img/room2/mock-sign.png">
      <img id="room2-wire-sign" src="img/room2/wire-sign.png">

      <!--  Room 3 -->
      <img id="room3-s1" src="img/room3/screen1.jpg">
      <img id="room3-s2" src="img/room3/screen2.jpg">
      <img id="room3-s3" src="img/room3/screen3.jpg">
      <img id="room3-s4" src="img/room3/screen4.jpg">
      <img id="room3-sign" src="img/room3/elec-store-sign.jpg">
      <img id="room3-sign2" src="img/room3/elec-sign-2.jpg">

      <!--  Room 4-->
      <img id="room4-map" src="img/room4/map.png" />
      <img id="room4-photo1" src="img/room4/photo1.png">
      <img id="room4-photo2" src="img/room4/photo2.png">
      <img id="room4-photo3" src="img/room4/photo3.png">
      <img id="room4-photo4" src="img/room4/photo4.png">
      <img id="room4-photo5" src="img/room4/photo5.png">
      <img id="room4-photo6" src="img/room4/photo6.png">
      <img id="room4-sign-photos" src="img/room4/sign-photos.png">
      <img id="room4-sign-roadshow" src="img/room4/sign-roadshow.png">

      <!--  Room 5 -->
      <img id="room5-sign-back" src="img/room5/room5_sign1.jpg">
      <img id="room5-sign-side" src="img/room5/room5_sign2.jpg">
      <img id="room5-sign-side2" src="img/room5/room5_sign3.jpg">
      <img id="room5-landing" src="img/room5/room5-iwc-img.jpg">
      <img id="room5-rust" src="img/room5/rust.png">
      <img id="room5-speech" src="img/room5/speech.png">
      <img id="room5-vr" src="img/room5/vr.png">
      <img id="room5-wa" src="img/room5/wa.png">

      <!-- Example Theater 6-->
      <video id="theaterVideo" autoplay loop="true" webkit-playsinline playsinline src="vid/movie.mp4"></video>
      <img id="theater-curtains" src="img/theater/curtains.png">
      <a-asset-item id="couch-obj" src="img/theater/couch/model.obj"></a-asset-item>
      <a-asset-item id="couch-mtl" src="img/theater/couch/materials.mtl"></a-asset-item>
    </a-assets>


    <a-assets>
      <!-- walking sound -->
      <audio id="river" src="./sound/walk.mp3"></audio>
    </a-assets>
    <a-assets>
      <!-- audio songs-->
      <!-- <audio id="song" src=""></audio> -->
      <!-- video -->
      <video id="women_ads" autoplay loop="true" src="vid/MallCloths3.mp4"></video>
    </a-assets>
  

    <!-- movement controls-->
    <a-entity id="rig" movement-controls position-listener listener position="0 0 0">
      <!-- Do position="-3 6 70" -->
      <a-entity id="player" camera="user-height: 2" look-controls="pointerLockEnabled: true" position="-3 30 0">
        <a-entity cursor="fuse: true;" position="0 0 -3" geometry="primitive: ring"
          material="color: black; shader: flat">
          <a-animation begin="click" easing="ease-in" attribute="scale" dur="150" fill="forwards" from="0.1 0.1 0.1"
            to="0.15 0.15 0.15"></a-animation>
          <a-animation begin="cursor-fusing" easing="ease-in" attribute="scale" dur="1500" fill="backwards"
            from="0.15 0.15 0.15" to="0.1 0.1 0.1"></a-animation>
        </a-entity>
      </a-entity>
    </a-entity>
    </a-entity>

    <!-- Wall pictures -->

    <!-- hallway starts -->
    <!-- try_wall -->
    <a-entity position="-31 8.5 20" rotation="0 90 0">
      <a-image position="0 0 0" src="#try_wall" height="40" width="35"></a-image>
    </a-entity>

    <!--left wall -->
    <a-entity position="-31 8.5 31" rotation="0 90 0">
      <!-- <a-image position="0 0 0" src="#team-poster" height="10" width="10"></a-image> -->
      <!-- <a-image position="-19 0 0" src="#team-poster" height="10" width="10"></a-image> -->
      <!-- <a-image position="23 0 0" src="#team-poster" height="10" width="10"></a-image> -->
      <a-image position="45 0 0" src="#team-poster" height="10" width="10"></a-image>
    </a-entity>

    <!-- right wall -->
    <a-entity position="25 8.5 31" rotation="0 -90 0">
      <a-image position="0 0 0" src="#team-poster" height="10" width="10"></a-image>
      <a-image position="19 0 0" src="#team-poster" height="10" width="10"></a-image>
      <a-image position="-23 0 0" src="#team-poster" height="10" width="10"></a-image>
      <a-image position="-45 0 0" src="#team-poster" height="10" width="10"></a-image>
    </a-entity>

    <!-- front wall -->
    <a-entity position="0 8.5 -31" rotation="0 0 0">
      <a-image position="-14 0 0" rotation="0 0 0" src="#team-poster" height="10" width="10"></a-image>
      <a-image position="8 0 0" rotation="0 0 0" src="#team-poster" height="10" width="10"></a-image>
    </a-entity>

        <!-- back/entry wall -->
        <a-entity position="0 8.5 55" rotation="0 -180 0">
          <a-image position="-8 0 0" rotation="0 0 0" src="#team-poster" height="10" width="10"></a-image>
          <a-image position="14 0 0" rotation="0 0 0" src="#team-poster" height="10" width="10"></a-image>
        </a-entity>
        <!-- Grocery image 1 -->
        <a-entity position="-58 0 -5" rotation="0 -90 0">
          <a-image position="0 0 0" src="#grocery-img-1" height="58" width="58"></a-image>
        </a-entity>
        <!-- Grocery image 2 -->
        <a-entity position="-35 14 14" rotation="0 -90 0">
          <a-image position="0 0 0" src="#grocery-img-2" height="15" width="17"></a-image>
        </a-entity>
        <!-- Grocery image 3 -->
        <a-entity position="-35 6 -20" rotation="0 -90 0">
          <a-image position="0 0 0" src="#grocery-img-3" height="12" width="18"></a-image>
        </a-entity>
        <!-- Grocery image 4 -->
        <a-entity position="-35 20 -20" rotation="0 -90 0">
          <a-image position="0 0 0" src="#grocery-img-4" height="15" width="18"></a-image>
        </a-entity>
        <!-- Grocery image 5 -->
        <a-entity position="-35 40 -25" rotation="0 90 0" >
                  <!-- animation="property: position; to: -35 40 14; loop: true; dur: 2000"> -->
          <a-image position="0 0 0" src="#grocery-img-5" height="15" width="18"></a-image>
          <a-animation attribute="position" repeat="indefinite" to="-35 40 30" dur="2000"></a-animation>
        </a-entity>

        <!-- theatre -->
        <a-entity position="-1.5 1.5 -22.5">
            <a-video src="#women_ads" width="16" height="9" position="0 4 -20"></a-video>
      </a-entity>

    <!-- hallway ends -->

    <!-- Ground -->
    <a-grid id="ground" static-body material="src: #floor; repeat: 20 20" scale="10 10 10" rotation="-90 0 0"></a-grid>
    <!-- <a-grid id="roof" static-body material="src: img/universe.jpg; transparent: true;; repeat: 2 2" position="-50 30 -20" scale="3 1 3" rotation="90 0 0"></a-grid> -->
   
    <!-- Walls (used by map.js -->)
    <a-entity id="walls"></a-entity>

    <!-- Sky -->
    <a-sky id="sky" color="#fff" material="src: #night_sky; repeat: 2 2;"></a-sky>

    <!-- models -->
    <a-assets>
      <a-asset-item id="man" src="scene.gltf"></a-asset-item>
      <a-asset-item id="robot1" src="img/robots/robot1/scene.gltf"></a-asset-item>
      <a-asset-item id="robot3" src="img/robots/robot3/scene.gltf"></a-asset-item>
  </a-assets>

  <a-gltf-model src="#man" scale="2 2 2" ></a-gltf-model>
  <a-gltf-model src="#robot1" scale="5 5 5" position="10 0 60" ></a-gltf-model>
  <a-gltf-model src="#robot1" scale="5 5 5" position="-15 0 60" ></a-gltf-model>
  <a-entity gltf-model="#robot3" animation-mixer="clip: Experiment; loop: infinite" scale="5 5 5" position="-4 11 50" ></a-entity>
  <!-- <a-entity fbx-model="src: url(img/robots/robot4/source);" scale="5 5 5" position="0 0 50" ></a-entity> -->

  
</a-scene>

  <!-- scripts for creating rooms-->
  <script src="js/map.js"></script>
  <script src="js/video.js"></script>

  <!-- pwa stuff-->
  <script>
    if ('serviceWorker' in navigator) {
      console.log("Will the service worker register?");
      navigator.serviceWorker.register('server.js')
        .then(function (reg) {
          console.log("Yes, it did.");
        }).catch(function (err) {
          console.log("No it didn't. This happened:", err)
        });
    }
  </script>
</body>

</html>